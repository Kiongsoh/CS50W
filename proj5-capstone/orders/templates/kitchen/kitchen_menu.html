{% extends 'orders/base.html' %}
{% load static %}

{% block content %}
<div class="container">
    <h1>Manage Menu</h1>
    
    <button id="addItemBtn" class="btn btn-primary mb-4">Add New Item</button>
    
    <div class="menu-items-grid">
        {% for item in menu_items %}
            <div class="menu-item-card" data-item-id="{{ item.id }}">
                <div class="menu-image-container">
                    {% if item.image %}
                        <img src="{{ item.image.url }}" alt="{{ item.name }}" class="item-image">
                    {% else %}
                        <img src="{% static 'orders/default_image.jpg' %}" alt="{{ item.name }}">
                    {% endif %}
                </div>
                <div class="item-details">
                    <h3 class="menu-item-name">{{ item.item_name }}</h3>
                    <p class="price">${{ item.price }}</p>
                    <p class="description">{{ item.description }}</p>
                    <div class="item-actions">
                        <button class="edit-item-btn btn btn-secondary" data-item-id="{{ item.id }}">Edit</button>
                        <button class="delete-item-btn btn btn-danger" data-item-id="{{ item.id }}">Delete</button>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
</div>

<!-- Modal for editing/adding items -->
<div id="itemModal" class="modal fade" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Edit Menu Item</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="itemForm">
                    <input type="hidden" id="itemId">
                    <div class="form-group">
                        <label for="itemName">Name</label>
                        <input type="text" class="form-control" id="itemName" required>
                    </div>
                    <div class="form-group">
                        <label for="itemPrice">Price</label>
                        <input type="number" step="0.01" class="form-control" id="itemPrice" required>
                    </div>
                    <div class="form-group">
                        <label for="itemDescription">Description</label>
                        <textarea class="form-control" id="itemDescription"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="itemImage">Image</label>
                        <input type="file" class="form-control-file" id="itemImage" accept="image/*">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="saveItemBtn">Save</button>
            </div>
        </div>
    </div>
</div>

<script type="module" src="{% static 'js/kitchen_menu.js' %}"></script>
{% endblock %}